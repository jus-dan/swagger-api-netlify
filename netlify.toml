[build]
  command = "npm run update-build && npm run build"
  publish = "frontend/dist"
  functions = "functions"

[build.environment]
  NODE_VERSION = "18"

[functions]
  node_bundler = "esbuild"

[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

[[redirects]]
  from = "/api/person/*"
  to = "/.netlify/functions/person/:splat"
  status = 200

[[redirects]]
  from = "/api/resource/*"
  to = "/.netlify/functions/resource/:splat"
  status = 200

[[redirects]]
  from = "/api/category/*"
  to = "/.netlify/functions/category/:splat"
  status = 200

[[redirects]]
  from = "/api-docs"
  to = "/.netlify/functions/api/api-docs"
  status = 200

[[redirects]]
  from = "/person/docs"
  to = "/.netlify/functions/person/docs"
  status = 200

[[redirects]]
  from = "/auth/docs"
  to = "/.netlify/functions/auth/docs"
  status = 200

[[redirects]]
  from = "/admin/docs"
  to = "/.netlify/functions/admin/docs"
  status = 200

[[redirects]]
  from = "/organization/docs"
  to = "/.netlify/functions/organization/docs"
  status = 200

[[redirects]]
  from = "/docs"
  to = "/.netlify/functions/swagger"
  status = 200

[[redirects]]
  from = "/swagger"
  to = "/.netlify/functions/swagger"
  status = 200

[[redirects]]
  from = "/swagger-simple"
  to = "/.netlify/functions/swagger-simple"
  status = 200

[[redirects]]
  from = "/swagger.html"
  to = "/swagger.html"
  status = 200

[[redirects]]
  from = "/api-spec.json"
  to = "/api-spec.json"
  status = 200

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
